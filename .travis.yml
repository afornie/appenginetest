install:
  - if [[ ! -f google-cloud-sdk/path.bash.inc ]]; then
      echo "Downloading google cloud sdk";
      wget https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.zip;
      unzip -qq google-cloud-sdk.zip;
      google-cloud-sdk/install.sh --usage-reporting false --path-update false --rc-path=~/.bashrc --bash-completion false --override-components=app;
    fi;
  - google-cloud-sdk/bin/gcloud components update preview app --quiet

script:
    - echo \{\"credentials\":\{\"anto\":\{\"access_token\":\"$access_token\",\"expiration_time_millis\":$expiration_time_millis,\"refresh_token\":\"$refresh_token\"\}\}\} | tee ~/.appcfg_oauth2_tokens_java
    - cat ~/.appcfg_oauth2_tokens_java
    #- ./gradlew appengine-modules-ear:appengineUpdate
    - wget https://commondatastorage.googleapis.com/appengine-sdks/featured/appengine-java-sdk-1.9.2.zip -nv
    - unzip -q appengine-java-sdk-1.9.2.zip
    - appengine-java-sdk-1.9.2/bin/appcfg.sh --oauth2 update target/khata-service-war-1.0.0-SNAPSHOT


after_success:
    # Just if needed
    #- ./travis-ci-deploy.sh
